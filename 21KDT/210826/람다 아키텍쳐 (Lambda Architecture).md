# 람다 아키텍쳐 (Lambda Architecture)

## 람다 아키텍처란?

아래의 특징을 가진 빅 데이터 아키텍처

- 배치 및 스트림 처리 방법을 모두 활용하여 많은 양의 데이터를 처리
- 실시간 분석을 지원

> Lambda(람다)의 모양은 입구가 2개이고, 출구가 1개인 모양이다.

**람다 아키텍처 필요성?**

대용량 데이터는 일반적으로 쿼리에 많은 시간이 소요된다.

- 데이터 양에 따라 조회에 몇 시간씩 소요 되기도 함

람다 아키텍처는 

- <u>스피드 레이어</u> + <u>배치 레이어</u>의 조합으로,
- 대용량 데이터에도 **어느 정도의 실시간 분석 지원 가능**



## 람다 아키텍처 구성

![람다 아키텍쳐 (Lambda Architecture) 정리](https://t1.daumcdn.net/cfile/tistory/9995AE4F5BFCC50B20)

### Batch Layer (배치 레이어)

대용량 데이터 집계시, 조회 요청할 때마다 데이터를 제공해주는 데 매번 몇시간 씩 시간이 아주 오래 걸리는 서비스는 사용할 수 없다.

⇒ **조회에 걸리는 시간을 최소화 하자** ⇒ **배치를 이용**

> 배치 (batch, 특정 시간마다 주기적으로 계산을 수행하는 것)

배치를 이용하여 **데이터를 미리 계산** 해놓으면 조회에 걸리는 시간을 최소화할 수 있다.

**Batch Layer(배치 레이어)**의 저장소에서는 raw 데이터를 보관해놓는다. 

- raw 데이터 보관시의 이점
  - 배치 뷰의 데이터가 **부정확 할 때 복구가 가능**
  - 새로운 뷰를 제공하고자 할 때, 기존의 원본 데이터를 가지고 있음으로써 **새로운 뷰의 통계 분석이 가능**

**Batch Layer(배치 레이어)**에서 일반적으로 사용하는 <u>솔루션</u>으로는 <u>Apache Hadoop</u>이 있다.



### Speed Layer (스피드 레이어)

배치 레이어를 사용하여 대용량 데이터 조회 속도의 이슈를 해결했지만, 배치가 도는 간격의 사이에 있는 데이터는 조회할 수 없다.

- 예를 들어, 배치가 매일 자정마다 동작한다면 당일 오후에는 해당 일자의 데이터를 확인할 수 없을 것이다.

이런 문제를 해결하기 위해서 당일 데이터를 **실시간으로 집계**해서 **별도의 테이블에 집계**한다.

즉, **Speed Layer (스피드 레이어)의 역할은 배치 레이어에서 생기는 갭을 채우는 것이다.**

**Speed Layer (스피드 레이어)**에서는 아래의 <u>솔루션</u>들을 고려할 수 있다.

- <u>Apache Storm</u>
- <u>SQLstream</u>
- <u>Apache Spark</u>



### Serving Layer (서빙 레이어)

**배치 레이어 및 스피트 레이어의 출력을 저장**

<u>클라이언트</u>에서는 이 **Serving Layer (서빙 레이어)**에 미리 계산된 데이터를 조회하기 때문에 <u>빠른 응답이 가능</u>하다.



#### 솔루션 조합에 관하여

람다 아키텍처는 **특정 솔루션에 종속적이지 않다.**

데이터의 처리 기법을 소개하는 레퍼런스 아키텍처로 이해하는 것이 좋음

운영하는 서비스의 특성을 고려하여 <u>솔루션</u>을 **선택 / 조합**



- Kafka, Apache Hadoop, Voldemort, Twitter Storm, Cassandra로 구현한 람다 아키텍처 조감도

![람다 아키텍쳐 (Lambda Architecture) 정리](https://t1.daumcdn.net/cfile/tistory/997303335BFCC4D21B)

- **단점**
  - **스피트 레이어**와 **배치 레이어**가 **모두 똑같은 처리를 구현**하고 있으므로,
  - **중복**된 비즈니스 로직 및 두 경로의 아키텍처 관리에 따른 **복잡성이 발생**
  - 이 때문에 람다 아키텍처를 단순화한 **'카파 아키텍처(Kappa  architecture)'**를 선택하기도 한다.



## 출처

https://jhleed.tistory.com/122