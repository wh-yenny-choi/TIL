# DATA BASE (DB)

## 차례

DATA BASE의 정의와 태동

DATA BASE의 역사

DATA와 정보

DATA와 지식과의 관계

DATA의 종류

DATA의 생성속도

DATA 분석 적용 사례

스프레드시트와 DATABASE 차이

SQL 이란?

데이터베이스 객체란?

데이터베이스 객체의 종류

DATA BASE 기출 문제 예시

DATA BASE (SQL 기본쿼리 구조)

SQL 문장의 종류

ACID?

DATA BASE Table이란?

스키마 다이어그램

SELECT와 FROM절

WHERE절과 filtering

변수의 사용

ORDER BY절

SQL JOIN

SQL Sub queries

CREATE TABLE

SQL Inserting, Updating and Deleting

SQL Constraints 실습

INDEX란?

MS EXPRESS의 설치



## DATA BASE의 정의와 태동

다수의 사람들에게 공유되고, 사용될 목적으로 통합/관리되는 데이터의 집합

- 자료항목의 중복을 없애고 자료를 구조화하여 저장하므로써 검색 성능을 높인다.
- 데이터베이스에 대한 검색, 삽입, 변경, 삭제등의 주요 작업등이 있으며
- 자료 검색과 갱신의 효율을 높인다.
- 현대적 의미의 데이터베이스 개념은 1960년대부터 시작하였다.



**B+ Tree Index**

Index 길이가 0~100 일때,

1. 가운데를 자른다 (50 : 50)
2. 50에서 가운데를 자른다. (25:25:25:25)
3. 반복



## DATA와 정보

데이터 (data) 

- 세상으로부터 관찰된 내용이나 측정 등의 수단을 통하여 수집한 사실이나 값

정보 (information)

- 데이터 가공 결과
- 특정 상황에 대한 의사 결정을 내릴 수 있는 유용한 해석 또는 데이터 상호간의 관계 파악



## DATA와 지식과의 관계

지식(knowledge)

- 사람이 정보를 처리하고 연관 짓는 구조 또는 컴퓨터 체계가 명백한 방식으로 행동하기 위하여 갖추어야 할 정보를 형성하는 규칙 또는 환경

의사결정(Decision)

- 목표를 달성하기 위한 대안 중 가장 효율적인 방안을 선택



## DATA의 종류

정형데이터 : RDBMS, 스프레드시트

반정형데이터 : XML, HTML(스키마 포함)

비정형데이터 : 분석가능한 text, image, 동영상, 음성데이터



## DATA의 생성속도

하루 <u>250경</u> 바이트 비정형 정보

매달 <u>10억</u> 여 개 트윗

매달 <u>300억</u> 여 개 페이스북 메세지

<u>1조</u> 대 이상 모바일 기기로 가속화



## DATA 분석 적용 사례

X축 : **데이터 속도**

- 데이터 속도 빠르면, **실시간**
- 데이터 속도 느리면, **배치처리**

Y축 : **데이터의 다양성**

- 다양성 적으면, **정형데이터**
- 다양성 중간, **반정형데이터**
- 다양성 높으면, **비정형데이터**



## 스프레드시트와 DATABASE 차이

스프레드 시트

- 1980년대 초 personal computer 등장과 함께 환영받는 프로그램이었으며, 워드프로세서 다음으로 많이 사용되는 tool이었다.
- 심폰, 로터스 1-2-3등 여러 형태의 스프레드시트가 존재하였으나, 
- 현재에는 Microsoft Excel이 전세계에서 대부분 사용되고 있다.

DATABASE

- Database는 Host컴퓨터로부터 사용되어져 왔는데, 
- 현재에는 IT산업의 쌀이라 불리우며,대부분의 기업에서 
- 정보 저장 및 분석, 활용을 활발히 하는 data의 집합체이다.
- 과거에는 정형데이터의 저장이 일반적이였으나,
- 현재에는 big data의 개념이 중요해짐에 따라
- 비정형 데이터의 형태도 저장, 관리되고 있다.



## SQL 이란?

Structured Query Language

SQL ↔ Database

- 데이터베이스를 구축하고 활용하기 위해 사용하는 언어
- SQL은 관계형 데이터 모델로 표현되는 DB를 조작하는 언어로 초기 IBM에서 상용화 함
- SQL언어가 가장 널리 사용되고 있는 이유는 미국 국립 표준 협회가 이를 표준으로 제정함
- SQL은 영어 문장 형태로 일반 사용자도 쉽게 사용

ANSI

SQL-86

SQL-89

SQL-92

SQL:1999

SQL:2003

SQL:2006

SQL:2008

SQL:2011



## 데이터베이스 객체란?

데이터베이스에 저장되는 요소 중 테이블과 여러가지 요소들이 저장 됨

이것을 데이터베이스 객체(Database Objects)라고 명명 함

- **테이블**, **인덱스**, 종속관계(constraints), View, Trigger 등 여러가지 요소가 저장



++ 인간의 말을 컴퓨터 언어로?

- 파싱 (parse)
  - DB에서의 용어
  - 파싱하다 = 문법적 해부 
  - 주로 다른 언어로 작성된 문서를 디코딩 한다는 의미로 해석할 수 있다
- 컴파일
  - 컴파일하다 = 기계어 번역
- 인코딩



++ 컴퓨팅 파워가 좋다는 말이 varchar을 쓴다는 것과 어떻게 연결이 되는지 자세히 설명해 주실 수 있을까요?

- 컴퓨팅 파워가 좋다 = 컴퓨터가 일을 잘한다 = 컴퓨팅 성능이 좋다 
  - ⇒ 계산 능력이 좋다, 처리 능력이 좋다, 빠르다
  - 예를 들어 데스크탑은 노트북에 비해 컴퓨팅 파워가 좋다

- 넉넉한 varchar size 사용 가능



++ 컴퓨터를 종료해도 시간이 계속 업데이트 되는 이유?

- CMOS  / BIOS
  -  System Time 정의





## 데이터베이스 객체의 종류

**테이블 (Table)** : 데이터 저장 공간

- 하나 또는 여러 컬럼들이 모여 하나의 레코드를 구성 함

- 여러 레코드들이 모여 다시 테이블이 됨

  - 환자 테이블은 환자번호, 성명, 진료과목 등 여러 컬럼을 갖게 되며 환자수만큼의 레코드를 갖게 됨

- 시스템 테이블의 경우, 대부분 SQL Server가 내부적으로 관리를 목적으로 사용하게 됨

- 일반 사용자의 경우, 사용자 테이블을 대부분 사용하게 되며, 시스템 테이블의 접근 보다는 저장프로시저나 스키마뷰를 이용해서 이러한 정보를 참조할 수 있음

  

**인덱스 (Index)** : 테이블에 있는 데이터를 빠르게 검색 위한 객체

- 쿼리문을 이용하여 정보를 검색할 때 빠른 수행을 위해서 인덱스를 구성하여 사용 됨
- 다른 목적으로는 데이터의 무결성을 위해서도 사용
- SQL Server의 경우 Clustered 인덱스, Non Clustered 인덱스 등 두가지로 사용 됨
- 데이터베이스가 유용한 점은 Index의 사용이 최대 장점이라 할 수 있음



**View** : 실제로는 존재하지 않는 가상의 테이블

- 실제 테이블을 사용자 입장에서 논리적인 테이블을 만들어 쉽게 접근 할 수 있게 함
- 사용 목적은 편리성과 보안성



**Stored Procedure** : DB 내부에 저장된 일련의 SQL 명령문들을 하나의 함수처럼 실행하기 위한 쿼리의 집합

- 쿼리문을 저장해 두었다가 손쉽게 재사용할 수 있는 저장 프로시저
- 저장 프로시저가 생성이 되면, 소스 프로시저가 최초 한 번 컴파일 된 후, 처음 수행될 때만 한 번 만들어지고
- 이후에는 이러한 과정이 생략되고 컴파일 된 형태를 그대로 재사용하기 때문에 일반적인 쿼리수행에 비해 빠른 성능을 제공



**Trigger** : 이벤트(삽입, 삭제, 갱신 등) 발생시 자동화 작업 수행

- 테이블의 값이 변경(insert, update, delete)될 때 자동으로 수행되는 저장 프로시저
- 방아쇠를 당긴다는 의미로, 미리 정의된 프로시저 안에서 자동으로 수행되는 프로시저



**Data Type** : 실수치, 정수, 불린 자료형 따위의 여러 종류의 데이터를 식별하는 분류로서, 더 나아가 해당 자료형에 대한 가능한 값, 해당 자료형에서 수행을 마칠 수 있는 명령들, 데이터의 의미, 해당 자료형의 값을 저장하는 방식을 결정한다

- SQL Server가 제공하는 기본적인 데이터 형식말고도 User defined 데이터 형식
  - 환자 이름을 선언하는 데 있어 어느 사용자는 CHAR, VARCHAR 등 다르게 사용할 수 있는데, 데이터 타입을 통일시켜 사용하기 위하여 HWNJA_TYPE 이라는 데이터 형식을 만들어 선언하면, 
  - 사용자들은 환자 이름의 데이터 형식을 HWANJA_TYPE이라고 지정해서 사용



**Default** : 응용 소프트웨어나 컴퓨터 프로그램, 또는 장치에서 사용자의 개입없이 자동으로 할당되는 설정 또는 값

- 데이터가 입력될 때 값이 들어오지 않으면 자동으로 입력되도록 디폴트를 지정할 수 있음
  - 최초 진료일이 없을 경우, 자동으로 오늘 날짜가 입력 되도록 지정 할 수 있음



**Rule** : 특정 컬럼에 대하여 저장될 수 있는 값을 지정할 때 사용



**Constraint **(종속관계) : 테이블과 테이블 간의 relationship(연결관계)  

- 데이터의 무결성을 위해 사용
- Primary Key, Foreign Key, Check 등



## DATA BASE (SQL 기본쿼리 구조)

```sql
SELECT 필드명1, 필드명2,...,필드명n
FROM 테이블 명
WHERE 조건
GROUP BY 필드명
HAVING 조건
ORDER BY 필드명 (ASC|DESC)
```

 

**기본 구조**

```sql
# 단순 SELECT 문장
SELECT * FROM 사원;	

# 필드명 변경 후 SELECT한 문장
SELECT 사원번호, 성, 이름, 직급 AS 현재타이틀 

# SELECT에 조건문을 주어 검색(WHERE절)
SELECT 사원번호, 성, 이름, 직급 AS 현재타이틀 
FROM 사원
WHERE 직급 = '과장';

# SELECT에 조건문을 주어 검색(WERE절)
SELECT 사원번호, 성, 이름, 직급 AS 현재타이틀, 근무시작일 
FROM 사원
WHERE 근무시작일 > '20000101' AND 근무시작일 < '20021231';

# ORDER BY절 (ASC|DESE)
SELECT 사원번호, 성, 이름, 직급 AS 현재타이틀, 근무시작일
FROM 사원
ORDER BY 성(ASC);  # ASC는 생략 가능  

# GROUP BY 절 
SELECT 시도, COUNT(*) 사원번호
FROM 사원
GROUP BY 시도;

# HAVING 절
SELECT 시도, COUNT(*) 사원번호
FROM 사원
GROUP BY 시도
HAVING COUNT(*) >= 2;

# SELECT + FROM + GROUP BY + HAVING + ORDER BY
SELECT 시도, COUNT(*) 사원번호
FROM 사원
GROUP BY 시도
HAVING COUNT(*) >= 1
ORDER BY 1;
```



**WHERE 절 조건식**

연산자 종류

- 일반 연산자 : `+` `-`  `*` `/`
- 비교 연산자 : `=` `<>` `>` `<` `>=` `<=`
- 논리 연산자 : `AND` `OR` `NOT`
- 특수 연산자 : `BETWEEN` `IN`
- LIKE 연산자 : `*` `%`
- NULL 연산자 : `IS NOT NULL` `NULL`

우선순위 

- () → 논리 연산자 제외한 연산자 → NOT → AND → OR 
- NULL 은 어떤값이 입력 될지 모른다.

+++ 애스터리스크 (*asterisk*, 별표) : 곱하기 표시할 때, 알파벳 X와 혼동되는 것을 방지하기 위해 * 사용



**논리게이트**

OR (+)

| X    | Y    | F    |
| ---- | ---- | ---- |
| 0    | 0    | 0    |
| 0    | 1    | 1    |
| 1    | 0    | 1    |
| 1    | 1    | 1    |



AND (*)

| X    | Y    | F    |
| ---- | ---- | ---- |
| 0    | 0    | 0    |
| 0    | 1    | 0    |
| 1    | 0    | 0    |
| 1    | 1    | 1    |



NOR (OR의 반대 = + 의 반대)

| X    | Y    | F    |
| ---- | ---- | ---- |
| 0    | 0    | 1    |
| 0    | 1    | 0    |
| 1    | 0    | 0    |
| 1    | 1    | 0    |



NAND (AND의 반대 = *의 반대)

| X    | Y    | F    |
| ---- | ---- | ---- |
| 0    | 0    | 1    |
| 0    | 1    | 1    |
| 1    | 0    | 1    |
| 1    | 1    | 0    |



**그룹함수의 종류**

SUM()

MAX()

MIN()

AVG()

COUNT()



### sql 문장 예시

**문제** 입사일이 2018년 1월부터 6월 까지이며, 연봉이 2000만원 미만인 사원명, 사원번호, 연봉 출력 (사원테이블 : emp)

**답**

select 사원명, 사원번호, 연봉 from emp where 입사일 between '20180101' and '20180630', 연봉 <2000;



## SQL 문장의 종류

SQL

- DDL : 데이터 정의어 (DB구조 정의, 생성, 삭제)
  - CREATE
  - ALTER
  - TRUNCATE
  - RENAME
  - DROP
- DML : 데이터 조작어 (데이터 삽입, 변경, 삭제)
  - INSERT
  - UPDATE
  - DELETE
- DRL : 데이터 질의어 (데이터 검색)
  - SELECT
- TCL : 트랜잭션 조정어 (트랜잭선 반영, 취소)
  - COMMIT
  - ROLLBACK
  - SAVEPOINT
- DCL : 데이터 제어어 (사용권한 부여, 제거)
  - GRANT
  - REVOKE





ACID?

DATA BASE Table이란?

스키마 다이어그램

SELECT와 FROM절

WHERE절과 filtering

변수의 사용

ORDER BY절

SQL JOIN

SQL Sub queries

CREATE TABLE

SQL Inserting, Updating and Deleting

SQL Constraints 실습

INDEX란?

MS EXPRESS의 설치





